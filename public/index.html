<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>LA RULETA DE LA SUERTE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <h1>LA RULETA DE LA SUERTE</h1>
    <p class="muted">Menor número = Mayor prioridad.</p>

    <div class="row" style="margin-bottom: 12px">
      <label for="seasonSelect">Año de elección de destinos</label>
      <select id="seasonSelect"></select>
    </div>

    <div class="card">
      <h2>Destinos disponibles</h2>
      <p class="muted">
        Haz click en “Añadir” para incluir el destino en tu lista. Puedes
        seleccionar tantos como quieras.
      </p>

      <div class="search-wrap">
        <input
          id="itemSearch"
          class="search-input"
          type="text"
          placeholder="Busca destinos por cualquier columna..."
        />
      </div>

      <div id="clickItems"></div>
    </div>

    <form id="submitForm">
      <h2>Enviar / Actualizar tu ranking</h2>
      <div class="row">
        <label for="name">Nombre</label>
        <input
          id="name"
          type="text"
          required
          placeholder="Fernando Alonso"
        />
        <label for="order">Orden <i class="muted">(tu posición del BOE + 34)</i></label>
        <input
          id="order"
          type="number"
          required
          min="1"
          step="1"
          placeholder="1"
        />
      </div>

      <div class="card">
        <h3>Tus selecciones y orden</h3>
        <div class="quota">
          <div>Posición: <span id="quota" class="badge">0</span></div>
          <div>
            Seleccionados: <span id="selectedCount" class="badge">0</span>
          </div>
          <div>Restantes: <span id="remaining" class="badge">0</span></div>
        </div>
        <p class="drag-hint">
          Puedes seleccionar tantos como quieras. Arrastra para reordenar.
        </p>
        <div id="rankingTable"></div>
      </div>

      <input type="hidden" id="userId" />

      <div class="row row--mt">
        <button class="primary" type="submit">Guardar mis destinos</button>
        <button class="ghost" type="button" id="resetSelfBtn">
          Borrar mi usuario
        </button>
      </div>
      <div class="muted">
        El ID de tu usuario se guarda localmente en este navegador.
      </div>
    </form>

    <div class="card">
      <h2>Reparto de destinos</h2>
      <div class="row">
        <button class="primary" id="allocateBtn">Repartir</button>
        <button class="ghost" id="resetAllBtn">
          Reiniciar todos mis destinos
        </button>
      </div>
      <div id="allocationResult" class="mt-12"></div>
    </div>

    <div class="card">
      <h2>Destinos enviados</h2>
      <div id="subs"></div>
    </div>

    <!-- Splash Screen -->
    <div id="splash">
      <div class="splash-backdrop"></div>
      <div class="splash-content">
        <div class="splash-inner">
          <h1 class="splash-title">
            SI LO SÉ NO OPOSITO:
            <br />
            LA ELECCIÓN
          </h1>

          <video
            id="splashVideo"
            class="splash-media"
            src="/assets/video/explosive_explosion.webm"
            muted
            playsinline
            autoplay
            loop
            poster="/assets/img/splash_poster.jpg"
          ></video>

          <p class="splash-subtitle">Hecho por alguien</p>
        </div>
      </div>
    </div>

    <!-- BUENA SUERTE overlay -->
    <div id="luckOverlay">
      <div class="luck-backdrop"></div>
      <div class="luck-content">
        <img src="/assets/img/pepe_pray.png" alt="Suerte" class="luck-img" />
        <div class="luck-text">BUENA SUERTE</div>
      </div>
    </div>

    <!-- Scripts: splash first, then app -->
    <script src="/splash.js"></script>
    <script src="/api.js"></script>
    <script src="/allocation.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
